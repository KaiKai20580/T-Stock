@model IPagedResult<T_Stock.Models.Supplier>

<table>
    <thead>
        <tr>
            <th>Supplier ID</th>
            <th>Company</th>
            <th>Contact Person</th>
            <th>Phone Number</th>
            <th>Last Updated</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var s in Model.Items)
        {
            <tr>
                <td>@s.SupplierId</td>
                <td>@s.Company</td>
                <td>@s.ContactPerson</td>
                <td>@s.PhoneNumber</td>
                <td>@s.LastUpdated.ToString("yyyy-MM-dd")</td>
                <td><a class="editSupplierBtn" data-id="@s.SupplierId"><i class="ri-edit-line"></i></a></td>
            </tr>
        }
    </tbody>
</table>

@{
    int current = Model.Page;
    int total = Model.TotalPages;

    int start = Math.Max(1, current - 1);
    int end = Math.Min(total, start + 2);
    if (end - start < 2)
    {
        start = Math.Max(1, end - 2);
    }
}
<div class="pagination">

    <!-- First -->
    <button onclick="loadSuppliers(1)" @(Model.Page == 1 ? "disabled" : "")>
        First
    </button>

    <!-- Prev -->
    <button onclick="loadSuppliers(@(Math.Max(1, Model.Page - 1)))" @(Model.Page == 1 ? "disabled" : "")>
        &lt; Prev
    </button>

    <!-- Middle 3 numbers -->
    @for (int i = start; i <= end; i++)
    {
        <button name="numbers" onclick="loadSuppliers(@i)"
                class="@(i == Model.Page ? "active" : "")"
                @(i == Model.Page ? "disabled" : null)>
            @i
        </button>
    }

    <!-- If there are pages between end and last, show ellipsis + last page -->
    @if (end < total - 1)
    {
        <span class="dots">. . .</span>
        <button name="numbers" onclick="loadSuppliers(@total)" @(total == Model.Page ? "disabled" : "")>
            @total
        </button>
    }
    else if (end == total - 1 && total > end)
    {
        <button name="numbers" onclick="loadSuppliers(@total)" @(total == Model.Page ? "disabled" : null)>
            @total
        </button>
    }

    <!-- Next -->
    <button onclick="loadSuppliers(@(Math.Min(total, Model.Page + 1)))" @(Model.Page == total ? "disabled" : null)>
        Next &gt;
    </button>

    <!-- Last -->
    <button onclick="loadSuppliers(@total)" @(Model.Page == total ? "disabled" : null)>
        Last
    </button>
</div>

